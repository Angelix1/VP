(function(ve,Pt,f,t,le,B,b,e,N,H,Bt,M,oe){"use strict";const{openLazy:Mt,hideActionSheet:Va}=f.findByProps("openLazy","hideActionSheet");function Ee(n,r){if(n!=null&&r!=null)for(const a of Object.keys(r))typeof r[a]=="object"&&!Array.isArray(r[a])?(typeof n[a]!="object"&&(n[a]={}),Ee(n[a],r[a])):n[a]??=r[a]}function ct(n,r){try{Mt(new Promise(function(a){return a({default:n})}),"ActionSheet",r)}catch(a){Pt.logger.error(a.stack),showToast("Got error when opening ActionSheet! Please check debug logs")}}function $t(n,r){let a=n+r;a=Math.min(a,255);const g=n.toString(16).padStart(2,"0"),d=a.toString(16).padStart(2,"0");return{main:g,secondary:d}}const dt=function(n,r){return`${n}${Math.floor(r*255).toString(16).padStart(2,0)}`},se={toInt(n){return n=n.replace(/^#/,""),parseInt(n,16)},toHex(n){return"#"+n.toString(16).toUpperCase()},HSLtoHEX(n,r,a){a/=100;const g=r*Math.min(a,1-a)/100,d=function(R){const u=(R+n/30)%12,p=a-g*Math.max(Math.min(u-3,9-u,1),-1);return Math.round(255*p).toString(16).padStart(2,"0")};return`#${d(0)}${d(8)}${d(4)}`}};var ut=Object.freeze({__proto__:null,calculateLighterValue:$t,colorConverter:se,makeDefaults:Ee,openSheet:ct,setOpacity:dt});const{ScrollView:xt,View:Re,Text:Ut,TouchableOpacity:gt,TextInput:Ga,Image:kt,Animated:ie}=B.General,{FormLabel:Ot,FormIcon:zt,FormArrow:Ha,FormRow:ye,FormSwitch:Vt,FormSwitchRow:Ya,FormSection:Gt,FormDivider:Ht,FormInput:ft}=B.Forms,Yt=f.findByName("useIsFocused");f.findByProps("BottomSheetScrollView");const ht=f.findByStoreName("UserStore"),be=f.findByProps("showUserProfile");b.getAssetIDByName("ic_add_24px"),b.getAssetIDByName("ic_arrow"),b.getAssetIDByName("ic_minus_circle_24px"),b.getAssetIDByName("Check"),b.getAssetIDByName("Small");function vt(n){return e.React.createElement(zt,{style:{opacity:1},source:b.getAssetIDByName(n)})}const j=e.stylesheet.createThemedStyleSheet({basicPad:{paddingRight:10,marginBottom:10,letterSpacing:.25},header:{color:N.semanticColors.HEADER_SECONDARY,fontFamily:e.constants.Fonts.PRIMARY_BOLD,paddingLeft:"3%",fontSize:24},sub:{color:N.semanticColors.TEXT_POSITIVE,fontFamily:e.constants.Fonts.DISPLAY_NORMAL,paddingLeft:"4%",fontSize:18},flagsText:{color:N.semanticColors.HEADER_SECONDARY,fontFamily:e.constants.Fonts.PRIMARY_BOLD,paddingLeft:"4%",fontSize:16},container:{marginTop:25,marginLeft:"5%",marginBottom:-15,flexDirection:"row"},textContainer:{paddingLeft:15,paddingTop:5,flexDirection:"column",flexWrap:"wrap",shadowColor:"#000",shadowOffset:{width:1,height:4},shadowOpacity:.2,shadowRadius:4.65,elevation:8},image:{width:75,height:75,borderRadius:10,shadowColor:"#000",shadowOffset:{width:1,height:4},shadowOpacity:.2,shadowRadius:4.65,elevation:8},mainText:{opacity:.975,letterSpacing:.25},header:{color:N.semanticColors.HEADER_PRIMARY,fontFamily:e.constants.Fonts.DISPLAY_BOLD,fontSize:25,letterSpacing:.25},subHeader:{color:N.semanticColors.HEADER_SECONDARY,fontSize:12.75}});function Et(n){let{index:r}=n;var a,g,d,R;le.useProxy(t.storage);let u=t.storage===null||t.storage===void 0||(a=t.storage.inputs)===null||a===void 0?void 0:a.ignoredUserList[r];const p=e.React.useRef(new ie.Value(1)).current,S=function(){return ie.spring(p,{toValue:1.1,duration:10,useNativeDriver:!0}).start()},_=function(){return ie.spring(p,{toValue:1,duration:250,useNativeDriver:!0}).start()},I={transform:[{scale:p}]};let i=ht.getUser(u?.id),E=Object.values(ht.getUsers());i||(i=E.find(function(o){return o?.username==u?.username})),i||(i=E.find(function(o){var c,l;return(o==null||(c=o.username)===null||c===void 0?void 0:c.toLowerCase())==(u==null||(l=u.username)===null||l===void 0?void 0:l.toLowerCase())}));const y=e.NavigationNative.useNavigation();return Yt(),e.React.createElement(e.React.Fragment,null,e.React.createElement(xt,null,e.React.createElement(Re,{style:[j.basicPad,j.sub]},e.React.createElement(Gt,{title:"User Setting",style:[j.header]},e.React.createElement(ye,{label:"Find User Id or Username",leading:vt("ic_search"),onPress:function(){var o,c;i&&!(!((o=u.username)===null||o===void 0)&&o.length)?u.username=i.username:i&&!(!((c=u.id)===null||c===void 0)&&c.length)?u.id=i.id:H.showToast("Cannot find User Id/Username.")}}),e.React.createElement(ft,{title:"User Username | Case Sensitive",placeholder:"Missing No",value:u?.username,onChange:function(o){return u.username=o}}),e.React.createElement(ft,{title:"User Id",placeholder:"Missing No",value:u?.id,onChange:function(o){return u.id=o}}),e.React.createElement(ye,{label:"User is webhook?",subLabel:"User is webhook or system, and not BOT or Normal User.",leading:vt("ic_webhook_24px"),trailing:e.React.createElement(Vt,{value:u?.isWebhook||!1,onValueChange:function(o){return u.isWebhook=o}})})),i&&e.React.createElement(Re,{style:[j.container,{paddingBottom:10}]},e.React.createElement(gt,{onPress:function(){var o;return(o=be.showUserProfile)===null||o===void 0?void 0:o.call(be,{userId:i?.id})},onPressIn:S,onPressOut:_},e.React.createElement(ie.View,{style:I},e.React.createElement(kt,{source:{uri:(i==null||(R=i.getAvatarURL)===null||R===void 0||(d=R.call(i))===null||d===void 0||(g=d.replace)===null||g===void 0?void 0:g.call(d,"webp","png"))||"https://cdn.discordapp.com/embed/avatars/2.png"},style:{width:128,height:128,borderRadius:10}}))),e.React.createElement(Re,{style:j.textContainer},e.React.createElement(gt,{onPress:function(){return be.showUserProfile({userId:i?.id})}},e.React.createElement(Ut,{style:[j.mainText,j.header]},i?.username||u?.username||"No Name"))),e.React.createElement(Ht,null)),e.React.createElement(ye,{label:e.React.createElement(Ot,{text:"Remove User from Ignore List",style:{color:N.rawColors.RED_400}}),onPress:function(){var o,c;y.pop(),t.storage===null||t.storage===void 0||(c=t.storage.inputs)===null||c===void 0||(o=c.ignoredUserList)===null||o===void 0||o.splice(r,1)}}))))}const{ScrollView:Xt,View:jt,Text:Xa,TouchableOpacity:Wt,TextInput:Jt}=B.General,{FormLabel:ja,FormIcon:Kt,FormArrow:Qt,FormRow:me,FormSwitch:Wa,FormSwitchRow:Ja,FormSection:qt,FormDivider:Zt,FormInput:Ka}=B.Forms;function Rt(n,r){return React.createElement(Kt,{style:{opacity:1},source:r?n:b.getAssetIDByName(n)})}const ea=f.findByName("useIsFocused");f.findByProps("BottomSheetScrollView");const{getUser:ta}=f.findByProps("getUser"),aa=b.getAssetIDByName("ic_add_24px");b.getAssetIDByName("ic_arrow"),b.getAssetIDByName("ic_minus_circle_24px"),b.getAssetIDByName("Check"),b.getAssetIDByName("Small");const na=b.getAssetIDByName("ic_trash_24px"),q=e.stylesheet.createThemedStyleSheet({basicPad:{paddingRight:10,marginBottom:10,letterSpacing:.25},header:{color:N.semanticColors.HEADER_SECONDARY,fontFamily:e.constants.Fonts.PRIMARY_BOLD,paddingLeft:"3.5%",fontSize:24},sub:{color:N.semanticColors.TEXT_POSITIVE,fontFamily:e.constants.Fonts.DISPLAY_NORMAL,paddingLeft:"4%",fontSize:18},flagsText:{color:N.semanticColors.HEADER_SECONDARY,fontFamily:e.constants.Fonts.PRIMARY_BOLD,paddingLeft:"4%",fontSize:16},input:{fontSize:16,fontFamily:e.constants.Fonts.PRIMARY_MEDIUM,color:N.semanticColors.TEXT_NORMAL},placeholder:{color:N.semanticColors.INPUT_PLACEHOLDER_TEXT}});function ra(){var n;le.useProxy(t.storage);let[r,a]=React.useState("");const g=e.NavigationNative.useNavigation();ea();let d=(t.storage===null||t.storage===void 0||(n=t.storage.inputs)===null||n===void 0?void 0:n.ignoredUserList)??[];const R=function(){if(r){if(isNaN(parseInt(r)))d.push({id:void 0,username:r});else{let u=ta(r);if(u)d.push({id:u?.id,username:"",showUser:!1,isWebhook:!1});else return H.showToast("Invalid User Id")}a(""),g.push("VendettaCustomPage",{title:"Adding User to Ignore List",render:function(){return React.createElement(Et,{index:d?.length-1})}})}};return React.createElement(React.Fragment,null,React.createElement(Xt,{style:{flex:1}},React.createElement(qt,{style:[q.header,q.basicPad]},React.createElement(jt,{style:[q.header,q.sub]},d.length>0&&React.createElement(me,{label:"Clear List",trailing:Rt(na,!0),onPress:function(){d.length!==0&&Bt.showConfirmationAlert({title:"Hol up, wait a minute!",content:`This will removes in total ${d.length} users from ignore list.`,confirmText:"Ye",cancelText:"Nah",confirmColor:"brand",onConfirm:function(){t.storage.inputs.ignoredUserList=[]}})}}),d?.map(function(u,p){return React.createElement(React.Fragment,null,React.createElement(me,{label:u?.username||u?.id||"No Data",trailing:React.createElement(Qt,null),onPress:function(){return g.push("VendettaCustomPage",{title:"Editing User",render:function(){return React.createElement(Et,{index:p})}})}}),p!==d?.length-1&&React.createElement(Zt,null))}),React.createElement(me,{label:React.createElement(Jt,{value:r,onChangeText:a,placeholder:"User ID or Username",placeholderTextColor:q.placeholder.color,selectionColor:e.constants.Colors.PRIMARY_DARK_100,onSubmitEditing:R,returnKeyType:"done",style:q.input}),trailing:React.createElement(Wt,{onPress:R},Rt(aa,!0))})))))}const yt=f.findByProps("show","confirm","close");f.findByName("StaticSearchBarContainer"),f.findByStoreName("UserStore");const la=f.findByProps("showUserProfile"),oa=f.findByName("useIsFocused"),{openURL:sa}=f.findByProps("openURL","openDeeplink"),{ScrollView:ia,View:Y,Text:ce,TouchableOpacity:pe,TextInput:Qa,Image:ca,Animated:de}=B.General,{FormLabel:qa,FormIcon:Za,FormArrow:en,FormRow:W,FormSwitch:tn,FormSwitchRow:an,FormSection:nn,FormDivider:rn,FormInput:ln}=B.Forms,$=e.stylesheet.createThemedStyleSheet({main_text:{opacity:.975,letterSpacing:.25,fontFamily:e.constants.Fonts.DISPLAY_NORMAL},item_container:{display:"flex",flexDirection:"row",alignItems:"center",paddingTop:4,paddingBottom:4,width:"100%"},log_header:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",maxWidth:"95%"},log_sub_header:{display:"flex",flexDirection:"row",alignItems:"center",maxWidth:"50%"},log_time:{color:N.semanticColors.TEXT_MUTED,opacity:.99,fontSize:13,paddingLeft:4},log_type:{color:N.semanticColors.TEXT_MUTED,opacity:.45,fontSize:16,marginLeft:"auto"},avatar_container:{alignSelf:"start",justifySelf:"start",marginTop:5},author_avatar:{width:40,height:40,borderRadius:80},author_name:{color:N.semanticColors.HEADER_PRIMARY,fontFamily:e.constants.Fonts.DISPLAY_BOLD,fontSize:14,letterSpacing:.25,paddingBottom:4},old_message:{color:N.semanticColors.TEXT_MUTED,opacity:.89,fontSize:13},message_content:{color:N.semanticColors.TEXT_NORMAL,opacity:.985,fontSize:13},main_container:{paddingLeft:8,paddingRight:4,paddingTop:2,paddingBottom:16,width:"95%"},text_container:{display:"flex",flexDirection:"column",paddingBottom:4,paddingLeft:8,width:"95%"}});function Se(n,r){return n?.length>r?n?.substring(0,r)+"...":n}function _e(){var n,r,a;le.useProxy(t.storage),oa();const g=e.React.useRef(new de.Value(1)).current,d=function(){return de.spring(g,{toValue:1.1,duration:10,useNativeDriver:!0}).start()},R=function(){return de.spring(g,{toValue:1,duration:250,useNativeDriver:!0}).start()},u={transform:[{scale:g}]},[p,S]=e.React.useState([]);e.React.useEffect(function(){var i;(t.storage===null||t.storage===void 0||(i=t.storage.log)===null||i===void 0?void 0:i.length)>0&&S(t.storage.log.reverse())},[]),p?.length>(t.storage===null||t.storage===void 0||(n=t.storage.inputs)===null||n===void 0?void 0:n.logCount)&&t.storage.logWarning&&yt.show({title:"Log exceed limit",body:"Clear log?",confirmText:"Yes",cancelText:"NO",confirmColor:"brand",onConfirm:function(){t.storage.log=[],S([]),H.showToast("[ANTIED] Cleared the log")}});const _=Number((t.storage===null||t.storage===void 0||(r=t.storage.inputs)===null||r===void 0?void 0:r.logLength)||60);function I(i){let{data:E}=i;const{type:y,author:o,content:c,edited:l,where:m}=E;return e.React.createElement(e.React.Fragment,null,e.React.createElement(Y,{style:$.item_container},e.React.createElement(pe,{style:$.avatar_container,onPress:function(){return la.showUserProfile({userId:o.id})},onPressIn:d,onPressOut:R},e.React.createElement(de.View,{style:[u]},e.React.createElement(ca,{source:{uri:o.avatar?`https://cdn.discordapp.com/avatars/${o?.id}/${o.avatar}.png`:"https://cdn.discordapp.com/embed/avatars/2.png"},style:$.author_avatar}))),e.React.createElement(Y,{style:$.text_container},e.React.createElement(Y,{style:$.log_header},e.React.createElement(Y,{style:$.log_sub_header},e.React.createElement(ce,{style:[$.main_text,$.author_name]},`${o.username}`),e.React.createElement(Y,{style:{paddingLeft:"2px"}},y=="MessageUpdate"?e.React.createElement(W.Icon,{source:b.getAssetIDByName("pencil")}):e.React.createElement(W.Icon,{source:b.getAssetIDByName("ic_message_delete")})),e.React.createElement(pe,{onPress:function(){y=="MessageUpdate"&&E.where.guild&&E.where.channel&&E.where.messageLink?sa(`https://discord.com/channels/${E.where.guild}/${E.where.channel}/${E.where.messageLink}`):H.showToast("Cannot find target Message")}},e.React.createElement(Y,{style:{paddingLeft:"2px"}},e.React.createElement(W.Icon,{source:b.getAssetIDByName("ic_show_media")}))))),e.React.createElement(pe,{onPress:function(){let v=o.username;v+=` (${o.id}):
`,v+=`>>> ${c}`,l&&(v+=`

${l}`),e.clipboard.setString(v),H.showToast("Log content copied")},style:$.text_container},e.React.createElement(Y,null,l?.length>0?e.React.createElement(e.React.Fragment,null,e.React.createElement(ce,{style:[$.main_text,$.old_message]},Se(c,_)),e.React.createElement(ce,{style:[$.main_text,$.message_content]},Se(l,_))):e.React.createElement(ce,{style:$.message_content},Se(c,_)))))))}return e.React.createElement(e.React.Fragment,null,e.React.createElement(ia,null,!(!(t.storage===null||t.storage===void 0||(a=t.storage.switches)===null||a===void 0)&&a.enableLogging)&&e.React.createElement(e.React.Fragment,null,e.React.createElement(W,{label:"To save log of edited/deleted messages, go to plugin setting > patches > Toggle Antied Logging"})),p?.length>0?e.React.createElement(e.React.Fragment,null,e.React.createElement(W,{label:"Nuke logs",trailing:e.React.createElement(W.Icon,{source:b.getAssetIDByName("ic_trash_24px")}),onPress:function(){yt.show({title:"Nuke logs",body:"Nuke the Log?",confirmText:"Yash",cancelText:"nu uh",confirmColor:"brand",onConfirm:function(){t.storage.log=[],S([]),H.showToast("[ANTIED] Logs cleared")}})}})):e.React.createElement(e.React.Fragment,null,e.React.createElement(W,{label:"Only us chicken here, go touch some grass"})),p.length>0&&e.React.createElement(e.React.Fragment,null,e.React.createElement(Y,{style:$.main_container},e.React.createElement(e.ReactNative.FlatList,{style:{paddingHorizontal:10},contentContainerStyle:{paddingBottom:20},data:p,renderItem:function(i){let{item:E}=i;return e.React.createElement(I,{data:E})},removeClippedSubviews:!0,initialNumToRender:10,maxToRenderPerBatch:20})))))}const da=f.findByName("HelpMessage"),ua=f.findByName("CustomColorPickerActionSheet"),ga=f.findByProps("show","confirm","close"),{ScrollView:fa,View:k,Text:bt,TouchableOpacity:mt,TextInput:on,Pressable:sn,Image:ha}=B.General,{FormLabel:cn,FormIcon:te,FormArrow:dn,FormRow:x,FormSwitch:ue,FormSwitchRow:un,FormSection:Z,FormDivider:V,FormInput:va,FormSliderRow:pt}=B.Forms,O=e.stylesheet.createThemedStyleSheet({text:{color:N.semanticColors.HEADER_SECONDARY,paddingLeft:"5.5%",paddingRight:10,marginBottom:10,letterSpacing:.25,fontFamily:e.constants.Fonts.PRIMARY_BOLD,fontSize:16},subText:{color:N.semanticColors.TEXT_POSITIVE,paddingLeft:"6%",paddingRight:10,marginBottom:10,letterSpacing:.25,fontFamily:e.constants.Fonts.DISPLAY_NORMAL,fontSize:12},input:{fontSize:16,fontFamily:e.constants.Fonts.PRIMARY_MEDIUM,color:N.semanticColors.TEXT_NORMAL},placeholder:{color:N.semanticColors.INPUT_PLACEHOLDER_TEXT},container:{flex:1,justifyContent:"center",alignItems:"center"},colorPreview:{width:"75%",height:100,marginBottom:20},row:{flexDirection:"row",height:80,width:"90%",marginBottom:20},border:{borderRadius:12}}),Ea=b.getAssetIDByName("ic_add_24px");f.findByProps("getUser");const Ra=f.findByName("useIsFocused"),St=[{id:"enableMD",default:!0,label:"Toggle Message Delete",subLabel:"Logs deleted message"},{id:"enableMU",default:!0,label:"Toggle Message Update",subLabel:"Logs edited message"},{id:"enableLogging",default:!1,label:"Toggle Antied Logging",subLabel:"Save Logs to plugin's storage"},{id:"logWarning",default:!1,label:"Toggle Exceeding Log Limit Warning",subLabel:"Warn if log limit exceed"}],_t=[{id:"minimalistic",default:!0,label:"Minimalistic Settings",subLabel:"Removes all Styling (Enabled by Default)"},{id:"useBackgroundColor",default:!1,label:"Enable Background Color",subLabel:"Background Color for Deleted Message, similiar to Mention but Customizeable"},{id:"ignoreBots",default:!1,label:"Ignore Bots",subLabel:"Ignore bot deleted messages."},{id:"removeDismissButton",default:!1,label:"Remove Dissmiss Message",subLabel:"Remove clickable Dismiss Message text from deleted ephemeral messages."},{id:"addTimestampForEdits",default:!1,label:"Add Edit Timestamp",subLabel:"Add Timestamp for edited messages."}],Ct=[{id:"textColor",label:"Deleted Message Text Color",subLabel:"Click to customize Deleted Message Text Color",defaultColor:"#E40303"},{id:"backgroundColor",label:"Deleted Message Background Color",subLabel:"Click to customize Background Color",defaultColor:"#FF2C2F"},{id:"gutterColor",label:"Deleted Message Background Gutter Color",subLabel:"Click to customize Background Gutter Color",defaultColor:"#FF2C2F"}],It=[{id:"deletedMessageBuffer",title:"Customize Deleted Message",type:"default",placeholder:"This message is deleted"},{id:"editedMessageBuffer",title:"Customize Edited Separator",type:"default",placeholder:"`[ EDITED ]`"},{id:"historyToast",title:"Customize Remove History Toast Message",type:"default",placeholder:"History Removed"},{id:"logLength",title:"Customize Log message length",type:"numeric",placeholder:"60"},{id:"logCount",title:"Customize Log Limit",type:"numeric",placeholder:"1000"}];function ge(n){n=Number(n);const r=Math.min(Math.max(n,0),100),a=Math.round(r/100*255).toString(16).toUpperCase();return a.length===1?"0"+a:a}function wt(n){const r=parseInt(n,16);return isNaN(r)?0:Math.round(r/255*100)}const z={toPercentage:function(n){return n=Number(n),n===0?0:n===1?100:Math.round(n*100)},toDecimal:function(n){n=Number(n);const r=Math.min(Math.max(n,0),100);return r===0?0:r===100?1:r/100},formatDecimal:function(n){return n=Number(n),n===0||n===1?n:n.toFixed(2)}};function Ce(){var n,r,a,g,d,R,u,p,S,_,I,i,E,y,o,c;le.useProxy(t.storage);const[l,m]=e.React.useState(z.toDecimal(wt(t.storage===null||t.storage===void 0||(n=t.storage.colors)===null||n===void 0?void 0:n.backgroundColorAlpha)??100)),[v,C]=e.React.useState(z.toDecimal(wt(t.storage===null||t.storage===void 0||(r=t.storage.colors)===null||r===void 0?void 0:r.gutterColorAlpha)??100)),w=e.NavigationNative.useNavigation();Ra();const L=function(){w.push("VendettaCustomPage",{title:"List of Ignored Users",render:function(){return e.React.createElement(ra,null)}})};return e.React.createElement(fa,null,e.React.createElement(k,{style:{marginTop:20,marginBottom:20}},e.React.createElement(Z,{title:"Plugin Setting",style:[O.header]},e.React.createElement(da,{messageType:0},'"This Plugin development is moved to new Repository"'),e.React.createElement(x,{label:"Anti Edit & Delete Logs",leading:e.React.createElement(x.Icon,{source:b.getAssetIDByName("ic_audit_log_24px")}),trailing:x.Arrow,onPress:function(){return w.push("VendettaCustomPage",{title:"Antied Logging Page",render:function(){return e.React.createElement(_e,null)}})}}),(t.storage===null||t.storage===void 0||(a=t.storage.log)===null||a===void 0?void 0:a.length)>0&&e.React.createElement(e.React.Fragment,null,e.React.createElement(x,{label:"Clear Logs",leading:e.React.createElement(x.Icon,{source:b.getAssetIDByName("ic_trash_24px")}),trailing:x.Arrow,onPress:function(){ga.show({title:"Clear logs",body:"This will erase saved logs, continue?",confirmText:"Yes",cancelText:"No",confirmColor:"brand",onConfirm:function(){t.storage.log=[],H.showToast("[ANTIED] Logs cleared")}})}})),e.React.createElement(x,{label:"Customization",subLabel:"Show customization for the plugin",leading:e.React.createElement(te,{style:{opacity:1},source:b.getAssetIDByName("ic_category_16px")}),trailing:e.React.createElement(ue,{value:(t.storage===null||t.storage===void 0||(g=t.storage.switches)===null||g===void 0?void 0:g.customizeable)??!1,onValueChange:function(s){return t.storage.switches.customizeable=s}})}),(t.storage===null||t.storage===void 0||(d=t.storage.switches)===null||d===void 0?void 0:d.customizeable)&&e.React.createElement(e.React.Fragment,null,e.React.createElement(Z,{title:"Patches"}),e.React.createElement(V,null)),(t.storage===null||t.storage===void 0||(R=t.storage.switches)===null||R===void 0?void 0:R.customizeable)&&e.React.createElement(e.React.Fragment,null,e.React.createElement(k,{style:[O.subText]},St?.map(function(s,D){return e.React.createElement(e.React.Fragment,null,e.React.createElement(x,{label:s?.label,subLabel:s?.subLabel,leading:s?.icon&&e.React.createElement(te,{style:{opacity:1},source:b.getAssetIDByName(s?.icon)}),trailing:"id"in s?e.React.createElement(ue,{value:(t.storage===null||t.storage===void 0?void 0:t.storage.switches[s?.id])??s?.default,onValueChange:function(F){return t.storage.switches[s?.id]=F}}):void 0}),D!==St?.length-1&&e.React.createElement(V,null))}))),(t.storage===null||t.storage===void 0||(u=t.storage.switches)===null||u===void 0?void 0:u.customizeable)&&e.React.createElement(e.React.Fragment,null,e.React.createElement(Z,{title:"Switches"}),e.React.createElement(V,null)),(t.storage===null||t.storage===void 0||(p=t.storage.switches)===null||p===void 0?void 0:p.customizeable)&&e.React.createElement(e.React.Fragment,null,e.React.createElement(k,{style:[O.subText]},_t?.map(function(s,D){return e.React.createElement(e.React.Fragment,null,e.React.createElement(x,{label:s?.label,subLabel:s?.subLabel,leading:s?.icon&&e.React.createElement(te,{style:{opacity:1},source:b.getAssetIDByName(s?.icon)}),trailing:"id"in s?e.React.createElement(ue,{value:(t.storage===null||t.storage===void 0?void 0:t.storage.switches[s?.id])??s?.default,onValueChange:function(F){return t.storage.switches[s?.id]=F}}):void 0}),D!==_t?.length-1&&e.React.createElement(V,null))}))),(t.storage===null||t.storage===void 0||(S=t.storage.switches)===null||S===void 0?void 0:S.customizeable)&&e.React.createElement(e.React.Fragment,null,e.React.createElement(Z,{title:"Text Variables"}),e.React.createElement(V,null)),(t.storage===null||t.storage===void 0||(_=t.storage.switches)===null||_===void 0?void 0:_.customizeable)&&e.React.createElement(e.React.Fragment,null,e.React.createElement(k,{style:[O.subText]},It?.map(function(s,D){var F;return e.React.createElement(e.React.Fragment,null,e.React.createElement(va,{title:s?.title,keyboardType:s?.type,placeholder:s==null||(F=s.placeholder)===null||F===void 0?void 0:F.toString(),value:(t.storage===null||t.storage===void 0?void 0:t.storage.inputs[s.id])??s?.placeholder,onChange:function(P){return t.storage.inputs[s.id]=P.toString()}}),D!==It.length-1&&e.React.createElement(V,null))}))),(t.storage===null||t.storage===void 0||(I=t.storage.switches)===null||I===void 0?void 0:I.customizeable)&&e.React.createElement(e.React.Fragment,null,e.React.createElement(Z,{title:"Color Pickers"}),e.React.createElement(V,null)),(t.storage===null||t.storage===void 0||(i=t.storage.switches)===null||i===void 0?void 0:i.customizeable)&&e.React.createElement(e.React.Fragment,null,e.React.createElement(k,{style:[O.subText]},Ct?.map(function(s){var D;const F=function(){var P;return ct(ua,{color:ut==null||(P=se)===null||P===void 0?void 0:P.toInt(t.storage.colors[s.id]||s?.defaultColor||"#000"),onSelect:function(T){var U;const G=ut==null||(U=se)===null||U===void 0?void 0:U.toHex(T);t.storage.colors[s.id]=G}})};return e.React.createElement(e.React.Fragment,null,e.React.createElement(x,{label:s?.label,subLabel:s?.subLabel||"Click to Update",onPress:F,trailing:e.React.createElement(mt,{onPress:F},e.React.createElement(ha,{source:{uri:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mJsrQAAAgwBAJ9P6qYAAAAASUVORK5CYII="},style:{width:32,height:32,borderRadius:10,backgroundColor:(t.storage===null||t.storage===void 0?void 0:t.storage.colors[s.id])||((D=Ct.find(function(P){return P?.id==s?.id}))===null||D===void 0?void 0:D.defaultColor)||"#000"}}))}))}))),(t.storage===null||t.storage===void 0||(E=t.storage.switches)===null||E===void 0?void 0:E.customizeable)&&e.React.createElement(e.React.Fragment,null,e.React.createElement(k,{style:[O.subText]},e.React.createElement(k,{style:O.container},e.React.createElement(x,{style:{justifyContent:"center",alignItems:"center"},label:`Preview Style: ${!(t.storage===null||t.storage===void 0||(y=t.storage.switches)===null||y===void 0)&&y.darkMode?"Light":"Dark"} Mode`,subLabel:"Click to Switch Mode",trailing:e.React.createElement(ue,{value:(t.storage===null||t.storage===void 0||(o=t.storage.switches)===null||o===void 0?void 0:o.darkMode)??!0,onValueChange:function(s){return t.storage.switches.darkMode=s}})}),e.React.createElement(k,{style:[O.row,O.border,{overflow:"hidden",marginRight:10}]},e.React.createElement(k,{style:{width:"2%",backgroundColor:`${t.storage.colors.gutterColor}${ge(z.toPercentage(v))}`}}),e.React.createElement(k,{style:{flex:1,backgroundColor:`${t.storage.colors.backgroundColor}${ge(z.toPercentage(l))}`,justifyContent:"center",alignItems:"center"}},e.React.createElement(bt,{style:{fontSize:20,color:!(t.storage===null||t.storage===void 0||(c=t.storage.switches)===null||c===void 0)&&c.darkMode?"black":"white"}}," Low Effort Normal Example Message "),e.React.createElement(bt,{style:{fontSize:20,color:t.storage.colors.textColor||"#000000"}}," Low Effort Deleted Example Message "))),e.React.createElement(pt,{label:`Background Color Alpha: ${z.toPercentage(l)}%`,value:l,style:{width:"90%"},onValueChange:function(s){m(Number(z.formatDecimal(s))),t.storage.colors.backgroundColorAlpha=ge(z.toPercentage(s))}}),e.React.createElement(V,null),e.React.createElement(pt,{label:`Background Gutter Alpha: ${z.toPercentage(v)}%`,value:v,style:{width:"90%"},onValueChange:function(s){C(Number(z.formatDecimal(s))),t.storage.colors.gutterColorAlpha=ge(z.toPercentage(s))}}))))),e.React.createElement(Z,{title:"Ignore List Setting",style:[O.header]},e.React.createElement(x,{label:"Add User to List",subLabel:"List of ignored users for the plugin",leading:e.React.createElement(te,{style:{opacity:1},source:b.getAssetIDByName("ic_members")}),onPress:L,trailing:e.React.createElement(mt,{onPress:L},e.React.createElement(te,{style:{opacity:1},source:Ea}))}),e.React.createElement(V,null))))}f.findByProps("openLazy","hideActionSheet");const J=f.findByProps("getChannel","getDMFromUserId"),ya=f.findByProps("_channelMessages"),ba=f.findByProps("getMessage","getMessages");function ma(n){return M.before("dispatch",e.FluxDispatcher,function(r){const[a]=r,g=a?.type;if(g=="MESSAGE_DELETE"){var d,R,u,p,S,_,I,i,E,y,o,c,l;if(t.storage.switches.enableMD==!1||a?.otherPluginBypass)return r;const A=ya.get(a.channelId),h=A?.get(a.id);if(!h||a?.id&&((d=n[a?.id])===null||d===void 0?void 0:d.stage)==2)return r;if(a?.id&&((R=n[a?.id])===null||R===void 0?void 0:R.stage)==1){var m;return n[a?.id].stage=2,((m=n[a?.id])===null||m===void 0?void 0:m.message)??r}const ot=h==null||(u=h.author)===null||u===void 0?void 0:u.id,st=h==null||(p=h.author)===null||p===void 0?void 0:p.username,ee=!h?.content&&(h==null||(S=h.attachments)===null||S===void 0?void 0:S.length)==0&&(h==null||(_=h.embeds)===null||_===void 0?void 0:_.length)==0;if(!ot||!st||ee||!(t.storage===null||t.storage===void 0||(I=t.storage.switches)===null||I===void 0)&&I.ignoreBots&&!(h==null||(i=h.author)===null||i===void 0)&&i.bot||(t.storage===null||t.storage===void 0||(y=t.storage.inputs)===null||y===void 0||(E=y.ignoredUserList)===null||E===void 0?void 0:E.length)>0&&!((o=t.storage.inputs.ignoredUserList)===null||o===void 0)&&o.some(function(fe){var Q;return fe?.id==(h==null||(Q=h.author)===null||Q===void 0?void 0:Q.id)||fe.username==h.author.username}))return r;if(r[0]={type:"MESSAGE_UPDATE",channelId:h?.channel_id||a?.channelId,message:{...h,content:h?.content,type:0,flags:64,channel_id:h?.channel_id||a?.channelId,guild_id:J==null||(c=J.getChannel(h?.channel_id))===null||c===void 0?void 0:c.guild_id,timestamp:`${new Date().toJSON()}`,state:"SENT",was_deleted:!0},optimistic:!1,sendMessageOptions:{},isPushNotification:!1},n[a?.id||h?.id]={message:r,stage:1},!(t.storage===null||t.storage===void 0||(l=t.storage.switches)===null||l===void 0)&&l.enableLogging){var v,C,w,L,s,D,F,P;t.storage.log.push({type:"MessageDelete",author:{id:h==null||(v=h.author)===null||v===void 0?void 0:v.id,username:`${(h==null||(C=h.author)===null||C===void 0?void 0:C.discriminator)=="0"?`@${h==null||(w=h.author)===null||w===void 0?void 0:w.username}`:`${h==null||(L=h.author)===null||L===void 0?void 0:L.username}#${h==null||(s=h.author)===null||s===void 0?void 0:s.discriminator}`}`,avatar:h==null||(D=h.author)===null||D===void 0?void 0:D.avatar,bot:h==null||(F=h.author)===null||F===void 0?void 0:F.bot},content:h?.content,where:{channel:h?.channel_id||a?.channelId,guild:J==null||(P=J.getChannel(h?.channel_id))===null||P===void 0?void 0:P.guild_id,messageLink:h?.id}})}return r}if(g=="MESSAGE_UPDATE"){var T,U,G,K,ae,X,ne,Ae,Te,De,Ne,Le,Fe,Pe,Be,Me,$e,xe,Ue;if(t.storage.switches.enableMU==!1||a?.otherPluginBypass||!(a==null||(U=a.message)===null||U===void 0||(T=U.author)===null||T===void 0)&&T.bot)return r;const A=ba.getMessage((a==null||(G=a.message)===null||G===void 0?void 0:G.channel_id)||a?.channelId,(a==null||(K=a.message)===null||K===void 0?void 0:K.id)||a?.id),h=A==null||(ae=A.author)===null||ae===void 0?void 0:ae.id,ot=A==null||(X=A.author)===null||X===void 0?void 0:X.username,st=!A?.content&&(A==null||(ne=A.attachments)===null||ne===void 0?void 0:ne.length)==0&&(A==null||(Ae=A.embeds)===null||Ae===void 0?void 0:Ae.length)==0;if(!A||!h||!ot||st||!(!(a==null||(Te=a.message)===null||Te===void 0)&&Te.content)||!A?.content||(a==null||(De=a.message)===null||De===void 0?void 0:De.content)==A?.content||(t.storage===null||t.storage===void 0||(Le=t.storage.inputs)===null||Le===void 0||(Ne=Le.ignoredUserList)===null||Ne===void 0?void 0:Ne.length)>0&&!(t.storage===null||t.storage===void 0||(Pe=t.storage.inputs)===null||Pe===void 0||(Fe=Pe.ignoredUserList)===null||Fe===void 0)&&Fe.some(function(he){var re,it;return he?.id==(A==null||(re=A.author)===null||re===void 0?void 0:re.id)||he?.username==(A==null||(it=A.author)===null||it===void 0?void 0:it.username)}))return r;let ee=(t.storage===null||t.storage===void 0||(Be=t.storage.inputs)===null||Be===void 0?void 0:Be.editedMessageBuffer)||"`[ EDITED ]`";ee=ee+`

`;const fe=a?.message||A;let Q=`${A?.content}`;if(!(t.storage===null||t.storage===void 0||(Me=t.storage.switches)===null||Me===void 0)&&Me.addTimestampForEdits){var ke;const he=Date.now(),re=`<t:${Math.abs(Math.round(he/1e3))}:R>`;Q+=`  (${re}) ${ee}${(a==null||(ke=a.message)===null||ke===void 0?void 0:ke.content)??""}`}else{var Oe;Q+=`  ${ee}${(a==null||(Oe=a.message)===null||Oe===void 0?void 0:Oe.content)??""}`}if(r[0]={type:"MESSAGE_UPDATE",message:{...fe,content:Q,guild_id:($e=J.getChannel(a?.channelId||(a==null||(xe=a.message)===null||xe===void 0?void 0:xe.channel_id)||A?.channel_id))===null||$e===void 0?void 0:$e.guild_id,edited_timestamp:"invalid_timestamp"}},!(t.storage===null||t.storage===void 0||(Ue=t.storage.switches)===null||Ue===void 0)&&Ue.enableLogging){var ze,Ve,Ge,He,Ye,Xe,je,We,Je,Ke,Qe,qe,Ze,et,tt,at,nt,rt,lt;t.storage.log.push({type:"MessageUpdate",author:{id:a==null||(Ve=a.message)===null||Ve===void 0||(ze=Ve.author)===null||ze===void 0?void 0:ze.id,username:`${(a==null||(He=a.message)===null||He===void 0||(Ge=He.author)===null||Ge===void 0?void 0:Ge.discriminator)=="0"?`@${a==null||(Xe=a.message)===null||Xe===void 0||(Ye=Xe.author)===null||Ye===void 0?void 0:Ye.username}`:`${a==null||(We=a.message)===null||We===void 0||(je=We.author)===null||je===void 0?void 0:je.username}#${a==null||(Ke=a.message)===null||Ke===void 0||(Je=Ke.author)===null||Je===void 0?void 0:Je.discriminator}`}`,avatar:a==null||(qe=a.message)===null||qe===void 0||(Qe=qe.author)===null||Qe===void 0?void 0:Qe.avatar,bot:a==null||(et=a.message)===null||et===void 0||(Ze=et.author)===null||Ze===void 0?void 0:Ze.bot},content:A?.content,edited:a==null||(tt=a.message)===null||tt===void 0?void 0:tt.content,where:{channel:a?.channelId||(a==null||(at=a.message)===null||at===void 0?void 0:at.channel_id)||A?.channel_id,guild:J==null||(nt=J.getChannel(a?.channelId||(a==null||(rt=a.message)===null||rt===void 0?void 0:rt.channel_id)||A?.channel_id))===null||nt===void 0?void 0:nt.guild_id,messageLink:a==null||(lt=a.message)===null||lt===void 0?void 0:lt.id}})}return r}return r})}const pa=f.findByProps("startEditMessage");function Sa(){return M.before("startEditMessage",pa,function(n){var r;let a=(t.storage===null||t.storage===void 0||(r=t.storage.inputs)===null||r===void 0?void 0:r.editedMessageBuffer)||"`[ EDITED ]`";a=a+`

`;const[g,d,R]=n,u=R.split(a);return n[2]=u[u.length-1],n})}const{DCDChatManager:_a}=e.ReactNative.NativeModules;function Ca(n){return M.before("updateRows",_a,function(r){var a;let g=JSON.parse(r[1]);const{textColor:d,backgroundColor:R,backgroundColorAlpha:u,gutterColor:p,gutterColorAlpha:S}=t.storage.colors,_=(a=t.storage.inputs)===null||a===void 0?void 0:a.deletedMessageBuffer,{useBackgroundColor:I,minimalistic:i,removeDismissButton:E}=t.storage.switches;function y(l,m){l||(l=m);const v=l?.trim();if(v.startsWith("#")){const C=v.slice(1);if(/^[0-9A-Fa-f]{6}$/.test(C))return"#"+C.toUpperCase()}else if(/^[0-9A-Fa-f]{6}$/.test(v))return"#"+v.toUpperCase();return m||"#000"}function o(l,m){const v=m?.toString(),C=["text","heading","s","u","em","strong","list","blockQuote"];if(Array.isArray(l))return l.map(function(w){return o(w,v)});if(typeof l=="object"&&l!==null){const{content:w,type:L,target:s,items:D}=l;if(!C.includes(L))return l;if(L==="text"&&w&&w.length>=1)return{content:[{content:w,type:"text"}],target:"usernameOnClick",type:"link",context:{username:1,medium:!0,usernameOnClick:{action:"0",userId:"0",linkColor:e.ReactNative.processColor(v),messageChannelId:"0"}}};const F=o(w,v),P=D?D.map(o,v):void 0;if(F!==w||P!==D||!C.includes(L)){const T={...l,content:F};return L==="blockQuote"&&s&&(T.content=F,T.target=s),L==="list"&&T?.content&&delete T.content,D&&(T.items=P),T}}return l}function c(l,m,v){return l&&(m!=null&&(l.content[0].content[0].content=m+"  "),v==null&&l.content[0].content.splice(1)),l}return g.forEach(function(l){if(l?.type==1){var m;if(n[l==null||(m=l.message)===null||m===void 0?void 0:m.id]){if((_?.length>0||_!="")&&(l.message.edited=_),i==!1){var v;const C=y(d,"#E40303"),w=o(l==null||(v=l.message)===null||v===void 0?void 0:v.content,C);l.message.content=w}if(E&&(l.message.ephemeralIndication=c(l.message.ephemeralIndication,void 0,void 0)),i==!1&&I==!0){const C=y(`${R}`,"#FF2C2F"),w=y(`${p}`,"#FF2C2F");l.backgroundHighlight??={},l.backgroundHighlight={backgroundColor:e.ReactNative.processColor(`${C}${u}`),gutterColor:e.ReactNative.processColor(`${w}${S}`)}}}}}),r[1]=JSON.stringify(g),r[1]})}const Ia=f.findByProps("updateMessageRecord","createMessageRecord");function wa(){return M.after("createMessageRecord",Ia,function(n,r){let[a]=n;r.was_deleted=a.was_deleted})}const Aa=f.findByName("MessageRecord",!1);function Ta(){return M.after("default",Aa,function(n,r){let[a]=n;r.was_deleted=!!a.was_deleted})}const At=f.findByProps("updateMessageRecord","createMessageRecord");function Da(){return M.instead("updateMessageRecord",At,function(n,r){let[a,g]=n;return g.was_deleted?At.createMessageRecord(g,a.reactions):r.apply(this,[a,g])})}const{FormSection:Na}=B.Forms,La=f.findByName("getScreens"),Fa=f.findByName("UserSettingsOverviewWrapper",!1),Pa=e.stylesheet.createThemedStyleSheet({container:{flex:1,backgroundColor:N.semanticColors.BACKGROUND_MOBILE_PRIMARY}});function Tt(n,r,a){const g=[],d=M.after("default",Fa,function(R,u){d();const p=oe.findInReactTree(u.props.children,function(S){return S.type&&S.type.name==="UserSettingsOverview"});g.push(M.after("render",p.type.prototype,function(S,_){let{props:{children:I}}=_;const i=[e.i18n.Messages.BILLING_SETTINGS,e.i18n.Messages.PREMIUM_SETTINGS];I=oe.findInReactTree(I,function(y){return y.children[1].type===Na}).children;const E=I.findIndex(function(y){return i.includes(y?.props.label)});n()&&I.splice(E===-1?4:E,0,r({}))}))},!0);if(g.push(d),La&&a){const R=`VENDETTA_PLUGIN_${e.lodash.snakeCase(a.key).toUpperCase()}`,u=a.page.render,p=e.React.memo(function(i){let{navigation:E}=i;const y=E.addListener("focus",function(){y(),E.setOptions(oe.without(a.page,"noErrorBoundary","render"))});return e.React.createElement(e.ReactNative.View,{style:Pa.container},a.page.noErrorBoundary?e.React.createElement(u,null):e.React.createElement(B.ErrorBoundary,null,e.React.createElement(u,null)))}),S={[R]:{type:"route",title:function(){return a.title},icon:a.icon,parent:null,screen:{route:`VendettaPlugin${e.lodash.chain(a.key).camelCase().upperFirst().value()}`,getComponent:function(){return p}}}},_=function(i,E){var y,o;const c=[...i],l=E?c==null||(y=c[0])===null||y===void 0?void 0:y.sections:c;if(!Array.isArray(l))return l;const m="Vendetta",v=l.find(function(C){return C?.title===m||C?.label===m});return v&&!(!(v==null||(o=v.settings)===null||o===void 0)&&o.includes(R))&&v.settings.push(R),c},I=function(){const i=f.findByProps("useOverviewSettings"),E=f.findByProps("getSettingTitleConfig"),y=f.findByProps("SETTING_RELATIONSHIPS","SETTING_RENDERER_CONFIGS"),o="getSettingSearchListItems",c="getSettingListItems",l=f.findByProps(o),m=l?o:c,v=l??f.findByProps(c);if(!v||!i)return!1;g.push(M.after("useOverviewSettings",i,function(L,s){return _(s)})),g.push(M.after("getSettingTitleConfig",E,function(L,s){return{...s,[R]:a.title}})),g.push(M.after(m,v,function(L,s){let[D]=L;return[...D.includes(R)?[{type:"setting_search_result",ancestorRendererData:S[R],setting:R,title:function(){return a.title},breadcrumbs:["Vendetta"],icon:S[R].icon}]:[],...s]}));const C=y.SETTING_RELATIONSHIPS,w=y.SETTING_RENDERER_CONFIGS;return y.SETTING_RELATIONSHIPS={...C,[R]:null},y.SETTING_RENDERER_CONFIGS={...w,...S},g.push(function(){y.SETTING_RELATIONSHIPS=C,y.SETTING_RENDERER_CONFIGS=C}),!0};(function(){const i=f.findByProps("SearchableSettingsList"),E=f.findByProps("SETTING_RENDERER_CONFIG"),y=f.findByProps("getSettingListItems");if(!y||!i||!E)return!1;g.push(M.before("type",i.SearchableSettingsList,function(c){return _(c,!0)})),g.push(M.after("getSettingListSearchResultItems",y,function(c,l){for(const m of l)m.setting===R&&(m.breadcrumbs=["Vendetta"])}));const o=E.SETTING_RENDERER_CONFIG;return E.SETTING_RENDERER_CONFIG={...o,...S},g.push(function(){E.SETTING_RENDERER_CONFIG=o}),!0})()||I()}return function(){return g.forEach(function(R){return R()})}}const{FormRow:Ie}=B.Forms;function Ba(){const n=e.NavigationNative.useNavigation();return React.createElement(B.ErrorBoundary,null,React.createElement(Ie,{label:"Anti Edit & Delete Setting",leading:React.createElement(Ie.Icon,{source:b.getAssetIDByName("ic_edit_24px")}),trailing:Ie.Arrow,onPress:function(){return n.push("VendettaCustomPage",{title:"Anti Edit & Delete Setting",render:Ce})}}))}const{FormRow:we}=B.Forms;function Ma(){const n=e.NavigationNative.useNavigation();return React.createElement(B.ErrorBoundary,null,React.createElement(we,{label:"Anti Edit & Delete Logs",leading:React.createElement(we.Icon,{source:b.getAssetIDByName("ic_audit_log_24px")}),trailing:we.Arrow,onPress:function(){return n.push("VendettaCustomPage",{title:"Anti Edit & Delete Logs",render:_e})}}))}function $a(){const n=[];return n.push(Tt(function(){return!0},function(){return React.createElement(Ba,null)},{key:"antied_setting",icon:b.getAssetIDByName("ic_edit_24px"),title:"Anti Edit & Delete Settings",page:{title:"Anti Edit & Delete Settings",render:Ce}}),Tt(function(){return!0},function(){return React.createElement(Ma,null)},{key:"antied_logs",icon:b.getAssetIDByName("ic_message_delete"),title:"Anti Edit & Delete Logs",page:{title:"Anti Edit & Delete Logs",render:_e}})),function(){return n.forEach(function(r){return r()})}}const Dt=f.findByProps("openLazy","hideActionSheet"),xa=f.findByProps("getMessage","getMessages"),Ua=f.findByProps("getChannel","getDMFromUserId"),Nt=f.findByProps("_channelMessages"),{FormRow:ka,FormIcon:Oa}=B.Forms;Ee(t.storage,{switches:{customizeable:!1,enableMD:!0,enableMU:!0,enableLogging:!1,useBackgroundColor:!1,ignoreBots:!1,minimalistic:!0,alwaysAdd:!1,darkMode:!0,removeDismissButton:!1,addTimestampForEdits:!1,timestampStyle:"R"},colors:{textColor:"#E40303",backgroundColor:"#FF2C2F",backgroundColorAlpha:"33",gutterColor:"#FF2C2F",gutterColorAlpha:"CC"},inputs:{deletedMessageBuffer:"This message is deleted",editedMessageBuffer:"`[ EDITED ]`",historyToast:"History Removed",logLength:60,logCount:1e3,ignoredUserList:[]},log:[],logWarning:!1});let Lt=[],Ft={};var za={onLoad:function(){Lt.push($a(),ma(Ft),Ca(Ft),Sa(),wa(),Ta(),Da(),M.before("openLazy",Dt,function(n){let[r,a,g]=n;const d=g?.message;a!=="MessageLongPressActionSheet"||!d||r.then(function(R){const u=M.after("default",R,function(p,S){var _;e.React.useEffect(function(){return function(){u()}},[]);const I=oe.findInReactTree(S,function(o){var c,l;return(o==null||(l=o[0])===null||l===void 0||(c=l.type)===null||c===void 0?void 0:c.name)==="ButtonRow"});if(!I)return S;const i=Math.max(I.findIndex(function(o){var c,l;return(o==null||(c=o.props)===null||c===void 0?void 0:c.message)===(e.i18n===null||e.i18n===void 0||(l=e.i18n.Messages)===null||l===void 0?void 0:l.MESSAGE_ACTION_REPLY)}),0),E=xa.getMessage(d.channel_id,d?.id),y=function(o){return o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}((t.storage===null||t.storage===void 0||(_=t.storage.inputs)===null||_===void 0?void 0:_.editedMessageBuffer)||"`[ EDITED ]`");if(new RegExp(y,"gmi").test(d.content)){const o=i||1;I.splice(o,0,e.React.createElement(ka,{label:"Remove Edit History",leading:e.React.createElement(Oa,{style:{opacity:1},source:b.getAssetIDByName("ic_edit_24px")}),onPress:function(){var c,l,m,v,C,w;let L=(t.storage===null||t.storage===void 0||(c=t.storage.inputs)===null||c===void 0?void 0:c.editedMessageBuffer)||"`[ EDITED ]`";L=L+`

`;const s=d==null||(l=d.content)===null||l===void 0?void 0:l.split(L),D=s[s.length-1],F=d==null||(m=d.embeds)===null||m===void 0?void 0:m.map(function(T){var U,G,K;const ae=T==null||(K=T.color)===null||K===void 0||(G=K.replace(/.+\(/,""))===null||G===void 0||(U=G.replace(/\%/g,""))===null||U===void 0?void 0:U.replace(")",""),X=ae?.split(", "),ne=e.ReactNative.processColor(`${dt(se.HSLtoHEX(X[0],X[1],X[2]),X[3])}`);return{...T,author:T.author,title:T.rawTitle,description:T.rawDescription,url:T.url,type:T.type,image:T.image,thumbnail:T.thumbnail,color:ne,content_scan_version:1}});if(e.FluxDispatcher.dispatch({type:"MESSAGE_UPDATE",message:{...d,content:`${D}`,embeds:F??[],attachments:d.attachments??[],mentions:d.mentions??[],guild_id:Ua.getChannel(E.channel_id).guild_id},otherPluginBypass:!0}),Dt.hideActionSheet(),(t.storage===null||t.storage===void 0||(C=t.storage.inputs)===null||C===void 0||(v=C.historyToast)===null||v===void 0?void 0:v.length)>0||(t.storage===null||t.storage===void 0||(w=t.storage.inputs)===null||w===void 0?void 0:w.historyToast)!=""){var P;H.showToast(`[ANTI ED] ${t.storage===null||t.storage===void 0||(P=t.storage.inputs)===null||P===void 0?void 0:P.historyToast}`,b.getAssetIDByName("ic_edit_24px"))}}}))}})})}))},onUnload:function(){for(const n of Lt)n();for(const n in Nt._channelMessages)for(const r of Nt._channelMessages[n]._array)r.was_deleted&&e.FluxDispatcher.dispatch({type:"MESSAGE_DELETE",id:r.id,channelId:r.channel_id,otherPluginBypass:!0})},settings:Ce};return ve.default=za,Object.defineProperty(ve,"__esModule",{value:!0}),ve})({},vendetta,vendetta.metro,vendetta.plugin,vendetta.storage,vendetta.ui.components,vendetta.ui.assets,vendetta.metro.common,vendetta.ui,vendetta.ui.toasts,vendetta.ui.alerts,vendetta.patcher,vendetta.utils);
