(function(g,p,r,d,e,_,h,a,N,y){"use strict";const{ScrollView:U,View:P,Text:$,TouchableOpacity:q,TextInput:V}=_.General,{FormLabel:j,FormIcon:D,FormArrow:Y,FormRow:R,FormSwitch:F,FormSwitchRow:X,FormSection:O,FormDivider:B,FormInput:H}=_.Forms,C=e.stylesheet.createThemedStyleSheet({text:{color:y.semanticColors.HEADER_SECONDARY,paddingLeft:"5.5%",paddingRight:10,marginBottom:10,letterSpacing:.25,fontFamily:e.constants.Fonts.PRIMARY_BOLD,fontSize:16},subText:{color:y.semanticColors.TEXT_POSITIVE,paddingLeft:"6%",paddingRight:10,marginBottom:10,letterSpacing:.25,fontFamily:e.constants.Fonts.DISPLAY_NORMAL,fontSize:12},input:{fontSize:16,fontFamily:e.constants.Fonts.PRIMARY_MEDIUM,color:y.semanticColors.TEXT_NORMAL},placeholder:{color:y.semanticColors.INPUT_PLACEHOLDER_TEXT}});r.getAssetIDByName("ic_add_24px"),d.findByProps("getUser"),d.findByName("useIsFocused");const w=[{id:"copy_no_share",default:!1,label:"Copy No Share",subLabel:"Replace Share button on Image Modal Preview"},{id:"lpm_qol",default:!1,label:"Long Press Message QOL",subLabel:"Add 3 button when long press a message (copy [UUID, Mention, Both])"}];function k(){return N.useProxy(a.storage),a.storage.bool.copy_no_share??=!1,a.storage.bool.lpm_qol??=!1,a.storage.settings.patch??=!1,e.React.createElement(U,null,e.React.createElement(P,{style:{marginTop:20,marginBottom:20}},e.React.createElement(O,{title:"Plugin Setting",style:[C.header]},e.React.createElement(R,{label:"Reload the Plugin to Apply the Patches"}),e.React.createElement(B,null),e.React.createElement(R,{label:"Patches",subLabel:"Show Patches for the plugin",leading:e.React.createElement(D,{style:{opacity:1},source:r.getAssetIDByName("ic_category_16px")}),trailing:e.React.createElement(F,{value:a.storage.patch??!1,onValueChange:function(t){return a.storage.patch=t}})}),a.storage.patch&&e.React.createElement(P,{style:[C.subText]},w.map(function(t,n){return e.React.createElement(e.React.Fragment,null,e.React.createElement(R,{label:t.label,subLabel:t.subLabel,leading:t.icon&&e.React.createElement(D,{style:{opacity:1},source:r.getAssetIDByName(t.icon)}),trailing:"id"in t?e.React.createElement(F,{value:a.storage.bool[t.id]??t.default,onValueChange:function(o){return a.storage.bool[t.id]=o}}):void 0}),n!==w.length-1&&e.React.createElement(B,null))})))))}const c=d.findByProps("openLazy","hideActionSheet");d.findByProps("push","pushLazy","pop"),d.findByProps("getRenderCloseButton");const{FormRow:T,FormIcon:M}=_.Forms,x=e.React.createElement(M,{style:{opacity:1},source:r.getAssetIDByName("copy")});function m(t,n){if(t!=null&&n!=null)for(const o of Object.keys(n))typeof n[o]=="object"&&!Array.isArray(n[o])?(typeof t[o]!="object"&&(t[o]={}),m(t[o],n[o])):t[o]??=n[o]}m(a.storage,{bool:{copy_no_share:!1,lpm_qol:!1},settings:{patch:!1}});let S=[];const z={onLoad(){a.storage.bool.copy_no_share??=!1,a.storage.bool.lpm_qol??=!1,a.storage?.bool?.copy_no_share&&S.push(p.before("openLazy",c,function(t){let[n,o]=t;o==="MediaShareActionSheet"&&n.then(function(E){const I=p.after("default",E,function(A,v){let[{syncer:b}]=A;e.React.useEffect(function(){return I()},[]);let s=b.sources[b.index.value];Array.isArray(s)&&(s=s[0]);const i=s.sourceURI??s.uri,l=v?.props?.children?.props?.children;let f=l.find(function(L){return L.props?.label?.toLowerCase()=="share"});l[l.indexOf(f)]=e.React.createElement(T,{leading:x,label:"Copy Image Link",onPress:function(){c.hideActionSheet(),e.clipboard.setString(i),h.showToast("Image Url Copied",r.getAssetIDByName("toast_copy_link"))}})})})})),a.storage?.bool?.lpm_qol&&S.push(p.before("openLazy",c,function(t){const[n,o,E]=t;o==="MessageLongPressActionSheet"&&n.then(function(I){const A=p.after("default",I,function(v,b){e.React.useEffect(function(){return function(){A()}},[]);let[s,i]=b.props?.children?.props?.children?.props?.children;const l=s?.props?.message??E?.message;if(!i||!l)return;let f=i.find(function(u){return u?.props?.message?.toLowerCase()=="mention"});f&&delete i[i.indexOf(f)];let L=[{label:"Copy User's Id",subLabel:"Result: <Some ID>",icon:"ic_copy_id",callback:function(){c.hideActionSheet(),e.clipboard.setString(l?.author?.id??""),h.showToast("Copied User's ID to clipboard",r.getAssetIDByName("toast_copy_link"))}},{label:"Copy User's Mention",subLabel:"Result: <Mention>",icon:"ic_copy_id",callback:function(){c.hideActionSheet(),e.clipboard.setString(`<@${l?.author?.id??""}>`),h.showToast("Copied User's Mention to clipboard",r.getAssetIDByName("toast_copy_link"))}},{label:"Copy User's Id and Mention",subLabel:"Result: <Some ID> <Mention>",icon:"ic_copy_id",callback:function(){c.hideActionSheet(),e.clipboard.setString(`${l?.author?.id??""} <@${l?.author?.id??""}>`),h.showToast("Copied User to clipboard",r.getAssetIDByName("toast_copy_link"))}}].map(function(u){return e.React.createElement(e.React.Fragment,null,e.React.createElement(T,{label:u.label,subLabel:u.subLabel,leading:e.React.createElement(M,{style:{opacity:1},source:r.getAssetIDByName(u.icon)}),onPress:u.callback}))});i.unshift(L)})})}))},onUnload(){S.forEach(function(t){return t?.()})},settings:k};return g.default=z,Object.defineProperty(g,"__esModule",{value:!0}),g})({},vendetta.patcher,vendetta.ui.assets,vendetta.metro,vendetta.metro.common,vendetta.ui.components,vendetta.ui.toasts,vendetta.plugin,vendetta.storage,vendetta.ui);
