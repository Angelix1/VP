(function(R,o,e,u,c,p,r,h,v,y){"use strict";const{FormRow:M,FormIcon:N}=u.Forms,L=c.findByProps("openLazy","hideActionSheet"),U=e.React.createElement(N,{style:{opacity:1},source:r.getAssetIDByName("copy")});o.storage.bool.copy_no_share??=!1;var x=[o.storage.bool.copy_no_share&&p.before("openLazy",L,function(t){let[n,a]=t;a==="MediaShareActionSheet"&&n.then(function(S){const A=p.after("default",S,function(I,T){let[{syncer:f}]=I;e.React.useEffect(function(){return void A()},[]);let s=f.sources[f.index.value];Array.isArray(s)&&(s=s[0]);const i=s.sourceURI??s.uri,l=T?.props?.children?.props?.children;let g=l.find(function(E){return E.props?.label?.toLowerCase()=="share"});l[l.indexOf(g)]=e.React.createElement(M,{leading:U,label:"Copy Image Link",onPress:function(){L.hideActionSheet(),e.clipboard.setString(i),h.showToast("Image Url Copied",r.getAssetIDByName("toast_copy_link"))}})})})})];const b=c.findByProps("openLazy","hideActionSheet");c.findByProps("push","pushLazy","pop"),c.findByProps("getRenderCloseButton");const{FormRow:O,FormIcon:k}=u.Forms;o.storage.bool.lpm_qol??=!1,o.storage.bool.lpm_qol;var $=[o.storage.bool.lpm_qol&&p.before("openLazy",b,function(t){const[n,a,S]=t;a==="MessageLongPressActionSheet"&&n.then(function(A){const I=p.after("default",A,function(T,f){e.React.useEffect(function(){return function(){I()}},[]);let[s,i]=f.props?.children?.props?.children?.props?.children;const l=s?.props?.message??S?.message;if(!i||!l)return;let g=i.find(function(d){return d?.props?.message?.toLowerCase()=="mention"});g&&delete i[i.indexOf(g)];let E=[{label:"Copy User's Id",subLabel:"Result: <Some ID>",icon:"ic_copy_id",callback:function(){b.hideActionSheet(),e.clipboard.setString(l?.author?.id??""),h.showToast("Copied User's ID to clipboard",r.getAssetIDByName("toast_copy_link"))}},{label:"Copy User's Mention",subLabel:"Result: <Mention>",icon:"ic_copy_id",callback:function(){b.hideActionSheet(),e.clipboard.setString(`<@${l?.author?.id??""}>`),h.showToast("Copied User's Mention to clipboard",r.getAssetIDByName("toast_copy_link"))}},{label:"Copy User's Id and Mention",subLabel:"Result: <Some ID> <Mention>",icon:"ic_copy_id",callback:function(){b.hideActionSheet(),e.clipboard.setString(`${l?.author?.id??""} <@${l?.author?.id??""}>`),h.showToast("Copied User to clipboard",r.getAssetIDByName("toast_copy_link"))}}].map(function(d){return e.React.createElement(e.React.Fragment,null,e.React.createElement(O,{label:d.label,subLabel:d.subLabel,leading:e.React.createElement(k,{style:{opacity:1},source:r.getAssetIDByName(d.icon)}),onPress:d.callback}))});i.unshift(E)})})})];const{ScrollView:z,View:F,Text:H,TouchableOpacity:G,TextInput:Q}=u.General,{FormLabel:J,FormIcon:B,FormArrow:K,FormRow:_,FormSwitch:P,FormSwitchRow:W,FormSection:q,FormDivider:D,FormInput:Z}=u.Forms,w=e.stylesheet.createThemedStyleSheet({text:{color:y.semanticColors.HEADER_SECONDARY,paddingLeft:"5.5%",paddingRight:10,marginBottom:10,letterSpacing:.25,fontFamily:e.constants.Fonts.PRIMARY_BOLD,fontSize:16},subText:{color:y.semanticColors.TEXT_POSITIVE,paddingLeft:"6%",paddingRight:10,marginBottom:10,letterSpacing:.25,fontFamily:e.constants.Fonts.DISPLAY_NORMAL,fontSize:12},input:{fontSize:16,fontFamily:e.constants.Fonts.PRIMARY_MEDIUM,color:y.semanticColors.TEXT_NORMAL},placeholder:{color:y.semanticColors.INPUT_PLACEHOLDER_TEXT}});r.getAssetIDByName("ic_add_24px"),c.findByProps("getUser"),c.findByName("useIsFocused");const C=[{id:"copy_no_share",default:!1,label:"Copy No Share",subLabel:"Replace Share button on Image Modal Preview"},{id:"lpm_qol",default:!1,label:"Long Press Message QOL",subLabel:"Add 3 button when long press a message (copy [UUID, Mention, Both])"}];function V(){return v.useProxy(o.storage),o.storage.bool.copy_no_share??=!1,o.storage.bool.lpm_qol??=!1,o.storage.settings.patch??=!1,e.React.createElement(z,null,e.React.createElement(F,{style:{marginTop:20,marginBottom:20}},e.React.createElement(q,{title:"Plugin Setting",style:[w.header]},e.React.createElement(_,{label:"Reload the Plugin to Apply the Patches"}),e.React.createElement(D,null),e.React.createElement(_,{label:"Patches",subLabel:"Show Patches for the plugin",leading:e.React.createElement(B,{style:{opacity:1},source:r.getAssetIDByName("ic_category_16px")}),trailing:e.React.createElement(P,{value:o.storage.patch??!1,onValueChange:function(t){return o.storage.patch=t}})}),o.storage.patch&&e.React.createElement(F,{style:[w.subText]},C.map(function(t,n){return e.React.createElement(e.React.Fragment,null,e.React.createElement(_,{label:t.label,subLabel:t.subLabel,leading:t.icon&&e.React.createElement(B,{style:{opacity:1},source:r.getAssetIDByName(t.icon)}),trailing:"id"in t?e.React.createElement(P,{value:o.storage.bool[t.id]??t.default,onValueChange:function(a){return o.storage.bool[t.id]=a}}):void 0}),n!==C.length-1&&e.React.createElement(D,null))})))))}function m(t,n){if(t!=null&&n!=null)for(const a of Object.keys(n))typeof n[a]=="object"&&!Array.isArray(n[a])?(typeof t[a]!="object"&&(t[a]={}),m(t[a],n[a])):t[a]??=n[a]}m(o.storage,{bool:{copy_no_share:!1,lpm_qol:!1},settings:{patch:!1}});const Y=[...x,...$],j=function(){return Y.forEach(function(t){return t()})};return R.onUnload=j,R.settings=V,R})({},vendetta.plugin,vendetta.metro.common,vendetta.ui.components,vendetta.metro,vendetta.patcher,vendetta.ui.assets,vendetta.ui.toasts,vendetta.storage,vendetta.ui);
