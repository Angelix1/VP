(function(R,o,e,d,c,p,r,y,M,f){"use strict";const{FormRow:m,FormIcon:N}=d.Forms,L=c.findByProps("openLazy","hideActionSheet"),U=e.React.createElement(N,{style:{opacity:1},source:r.getAssetIDByName("copy")});var O=[o.storage.bool.copy_no_share&&p.before("openLazy",L,function(t){let[n,a]=t;a==="MediaShareActionSheet"&&n.then(function(S){const A=p.after("default",S,function(I,v){let[{syncer:g}]=I;e.React.useEffect(function(){return void A()},[]);let i=g.sources[g.index.value];Array.isArray(i)&&(i=i[0]);const s=i.sourceURI??i.uri,l=v?.props?.children?.props?.children;let b=l.find(function(E){return E.props?.label?.toLowerCase()=="share"});l[l.indexOf(b)]=e.React.createElement(m,{leading:U,label:"Copy Image Link",onPress:function(){L.hideActionSheet(),e.clipboard.setString(s),y.showToast("Image Url Copied",r.getAssetIDByName("toast_copy_link"))}})})})})];const h=c.findByProps("openLazy","hideActionSheet");c.findByProps("push","pushLazy","pop"),c.findByProps("getRenderCloseButton");const{FormRow:k,FormIcon:x}=d.Forms;var z=[o.storage.bool.lpm_qol&&p.before("openLazy",h,function(t){const[n,a,S]=t;a==="MessageLongPressActionSheet"&&n.then(function(A){const I=p.after("default",A,function(v,g){e.React.useEffect(function(){return function(){I()}},[]);let[i,s]=g.props?.children?.props?.children?.props?.children;const l=i?.props?.message??S?.message;if(!s||!l)return;let b=s.find(function(u){return u?.props?.message?.toLowerCase()=="mention"});b&&delete s[s.indexOf(b)];let E=[{label:"Copy User's Id",subLabel:"Result: <Some ID>",icon:"ic_copy_id",callback:function(){h.hideActionSheet(),e.clipboard.setString(l?.author?.id??""),y.showToast("Copied User's ID to clipboard",r.getAssetIDByName("toast_copy_link"))}},{label:"Copy User's Mention",subLabel:"Result: <Mention>",icon:"ic_copy_id",callback:function(){h.hideActionSheet(),e.clipboard.setString(`<@${l?.author?.id??""}>`),y.showToast("Copied User's Mention to clipboard",r.getAssetIDByName("toast_copy_link"))}},{label:"Copy User's Id and Mention",subLabel:"Result: <Some ID> <Mention>",icon:"ic_copy_id",callback:function(){h.hideActionSheet(),e.clipboard.setString(`${l?.author?.id??""} <@${l?.author?.id??""}>`),y.showToast("Copied User to clipboard",r.getAssetIDByName("toast_copy_link"))}}].map(function(u){return e.React.createElement(e.React.Fragment,null,e.React.createElement(k,{label:u.label,subLabel:u.subLabel,leading:e.React.createElement(x,{style:{opacity:1},source:r.getAssetIDByName(u.icon)}),onPress:u.callback}))});s.unshift(E)})})})];const{ScrollView:$,View:F,Text:X,TouchableOpacity:H,TextInput:G}=d.General,{FormLabel:Q,FormIcon:B,FormArrow:J,FormRow:_,FormSwitch:P,FormSwitchRow:K,FormSection:V,FormDivider:D,FormInput:W}=d.Forms,C=e.stylesheet.createThemedStyleSheet({text:{color:f.semanticColors.HEADER_SECONDARY,paddingLeft:"5.5%",paddingRight:10,marginBottom:10,letterSpacing:.25,fontFamily:e.constants.Fonts.PRIMARY_BOLD,fontSize:16},subText:{color:f.semanticColors.TEXT_POSITIVE,paddingLeft:"6%",paddingRight:10,marginBottom:10,letterSpacing:.25,fontFamily:e.constants.Fonts.DISPLAY_NORMAL,fontSize:12},input:{fontSize:16,fontFamily:e.constants.Fonts.PRIMARY_MEDIUM,color:f.semanticColors.TEXT_NORMAL},placeholder:{color:f.semanticColors.INPUT_PLACEHOLDER_TEXT}});r.getAssetIDByName("ic_add_24px"),c.findByProps("getUser"),c.findByName("useIsFocused");const w=[{id:"copy_no_share",default:!1,label:"Copy No Share",subLabel:"Replace Share button on Image Modal Preview"},{id:"lpm_qol",default:!1,label:"Long Press Message QOL",subLabel:"Add 3 button when long press a message (copy [UUID, Mention, Both])"}];function Y(){return M.useProxy(o.storage),e.React.createElement($,null,e.React.createElement(F,{style:{marginTop:20,marginBottom:20}},e.React.createElement(V,{title:"Plugin Setting",style:[C.header]},e.React.createElement(_,{label:"Reload the Plugin to Apply the Patches"}),e.React.createElement(D,null),e.React.createElement(_,{label:"Patches",subLabel:"Show Patches for the plugin",leading:e.React.createElement(B,{style:{opacity:1},source:r.getAssetIDByName("ic_category_16px")}),trailing:e.React.createElement(P,{value:o.storage.patch??!1,onValueChange:function(t){return o.storage.patch=t}})}),o.storage.patch&&e.React.createElement(F,{style:[C.subText]},w.map(function(t,n){return e.React.createElement(e.React.Fragment,null,e.React.createElement(_,{label:t.label,subLabel:t.subLabel,leading:t.icon&&e.React.createElement(B,{style:{opacity:1},source:r.getAssetIDByName(t.icon)}),trailing:"id"in t?e.React.createElement(P,{value:o.storage.bool[t.id]??t.default,onValueChange:function(a){return o.storage.bool[t.id]=a}}):void 0}),n!==w.length-1&&e.React.createElement(D,null))})))))}function T(t,n){if(t!=null&&n!=null)for(const a of Object.keys(n))typeof n[a]=="object"&&!Array.isArray(n[a])?(typeof t[a]!="object"&&(t[a]={}),T(t[a],n[a])):t[a]??=n[a]}T(o.storage,{bool:{copy_no_share:!1,lpm_qol:!1},settings:{patch:!1}});const j=[...O,...z],q=function(){return j.forEach(function(t){return t()})};return R.onUnload=q,R.settings=Y,R})({},vendetta.plugin,vendetta.metro.common,vendetta.ui.components,vendetta.metro,vendetta.patcher,vendetta.ui.assets,vendetta.ui.toasts,vendetta.storage,vendetta.ui);
