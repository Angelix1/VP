(function(I,_,i,g,e,L,R,a,j,S){"use strict";const{ScrollView:Y,View:N,Text:K,TouchableOpacity:W,TextInput:Z}=L.General,{FormLabel:ee,FormIcon:U,FormArrow:te,FormRow:P,FormSwitch:O,FormSwitchRow:oe,FormSection:X,FormDivider:k,FormInput:ae}=L.Forms,x=e.stylesheet.createThemedStyleSheet({text:{color:S.semanticColors.HEADER_SECONDARY,paddingLeft:"5.5%",paddingRight:10,marginBottom:10,letterSpacing:.25,fontFamily:e.constants.Fonts.PRIMARY_BOLD,fontSize:16},subText:{color:S.semanticColors.TEXT_POSITIVE,paddingLeft:"6%",paddingRight:10,marginBottom:10,letterSpacing:.25,fontFamily:e.constants.Fonts.DISPLAY_NORMAL,fontSize:12},input:{fontSize:16,fontFamily:e.constants.Fonts.PRIMARY_MEDIUM,color:S.semanticColors.TEXT_NORMAL},placeholder:{color:S.semanticColors.INPUT_PLACEHOLDER_TEXT}});i.getAssetIDByName("ic_add_24px"),g.findByProps("getUser"),g.findByName("useIsFocused");const z=[{id:"copy_no_share",default:!1,label:"Copy No Share",subLabel:"Replace Share button on Image Modal Preview"},{id:"lpm_qol",default:!1,label:"Long Press Message QOL",subLabel:"Add 3 button when long press a message (copy [UUID, Mention, Both])"}];function H(){return j.useProxy(a.storage),a.storage.bool.copy_no_share??=!1,a.storage.bool.lpm_qol??=!1,a.storage.settings.patch??=!1,e.React.createElement(Y,null,e.React.createElement(N,{style:{marginTop:20,marginBottom:20}},e.React.createElement(X,{title:"Plugin Setting",style:[x.header]},e.React.createElement(P,{label:"Reload the Plugin to Apply the Patches"}),e.React.createElement(k,null),e.React.createElement(P,{label:"Patches",subLabel:"Show Patches for the plugin",leading:e.React.createElement(U,{style:{opacity:1},source:i.getAssetIDByName("ic_category_16px")}),trailing:e.React.createElement(O,{value:a.storage.patch??!1,onValueChange:function(t){return a.storage.patch=t}})}),a.storage.patch&&e.React.createElement(N,{style:[x.subText]},z.map(function(t,r){return e.React.createElement(e.React.Fragment,null,e.React.createElement(P,{label:t.label,subLabel:t.subLabel,leading:t.icon&&e.React.createElement(U,{style:{opacity:1},source:i.getAssetIDByName(t.icon)}),trailing:"id"in t?e.React.createElement(O,{value:a.storage.bool[t.id]??t.default,onValueChange:function(l){return a.storage.bool[t.id]=l}}):void 0}),r!==z.length-1&&e.React.createElement(k,null))})))))}const y=g.findByProps("openLazy","hideActionSheet");g.findByProps("push","pushLazy","pop"),g.findByProps("getRenderCloseButton");const{FormRow:$,FormIcon:q}=L.Forms,G=e.React.createElement(q,{style:{opacity:1},source:i.getAssetIDByName("copy")});function V(t,r){if(t!=null&&r!=null)for(const l of Object.keys(r))typeof r[l]=="object"&&!Array.isArray(r[l])?(typeof t[l]!="object"&&(t[l]={}),V(t[l],r[l])):t[l]??=r[l]}V(a.storage,{bool:{copy_no_share:!1,lpm_qol:!1},settings:{patch:!1}});let B=[];const Q={onLoad(){var t,r;a.storage.bool.copy_no_share??=!1,a.storage.bool.lpm_qol??=!1,!(a.storage===null||a.storage===void 0||(t=a.storage.bool)===null||t===void 0)&&t.copy_no_share&&B.push(_.before("openLazy",y,function(l){let[C,F]=l;F==="MediaShareActionSheet"&&C.then(function(D){const w=_.after("default",D,function(T,M){let[{syncer:A}]=T;var c,d,u;e.React.useEffect(function(){return w()},[]);let s=A.sources[A.index.value];Array.isArray(s)&&(s=s[0]);const v=s.sourceURI??s.uri,p=M==null||(u=M.props)===null||u===void 0||(d=u.children)===null||d===void 0||(c=d.props)===null||c===void 0?void 0:c.children;let E=p.find(function(h){var n,f;return((f=h.props)===null||f===void 0||(n=f.label)===null||n===void 0?void 0:n.toLowerCase())=="share"});p[p.indexOf(E)]=e.React.createElement($,{leading:G,label:"Copy Image Link",onPress:function(){y.hideActionSheet(),e.clipboard.setString(v),R.showToast("Image Url Copied",i.getAssetIDByName("toast_copy_link"))}})})})})),!(a.storage===null||a.storage===void 0||(r=a.storage.bool)===null||r===void 0)&&r.lpm_qol&&B.push(_.before("openLazy",y,function(l){const[C,F,D]=l;F==="MessageLongPressActionSheet"&&C.then(function(w){const T=_.after("default",w,function(M,A){var c,d,u,s,v,p;e.React.useEffect(function(){return function(){T()}},[]);let[E,h]=(v=A.props)===null||v===void 0||(s=v.children)===null||s===void 0||(u=s.props)===null||u===void 0||(d=u.children)===null||d===void 0||(c=d.props)===null||c===void 0?void 0:c.children;const n=(E==null||(p=E.props)===null||p===void 0?void 0:p.message)??D?.message;if(!h||!n)return;let f=h.find(function(o){var b,m;return(o==null||(m=o.props)===null||m===void 0||(b=m.message)===null||b===void 0?void 0:b.toLowerCase())=="mention"});f&&delete h[h.indexOf(f)];let J=[{label:"Copy User's Id",subLabel:"Result: <Some ID>",icon:"ic_copy_id",callback:function(){var o;y.hideActionSheet(),e.clipboard.setString((n==null||(o=n.author)===null||o===void 0?void 0:o.id)??""),R.showToast("Copied User's ID to clipboard",i.getAssetIDByName("toast_copy_link"))}},{label:"Copy User's Mention",subLabel:"Result: <Mention>",icon:"ic_copy_id",callback:function(){var o;y.hideActionSheet(),e.clipboard.setString(`<@${(n==null||(o=n.author)===null||o===void 0?void 0:o.id)??""}>`),R.showToast("Copied User's Mention to clipboard",i.getAssetIDByName("toast_copy_link"))}},{label:"Copy User's Id and Mention",subLabel:"Result: <Some ID> <Mention>",icon:"ic_copy_id",callback:function(){var o,b;y.hideActionSheet(),e.clipboard.setString(`${(n==null||(o=n.author)===null||o===void 0?void 0:o.id)??""} <@${(n==null||(b=n.author)===null||b===void 0?void 0:b.id)??""}>`),R.showToast("Copied User to clipboard",i.getAssetIDByName("toast_copy_link"))}}].map(function(o){return e.React.createElement(e.React.Fragment,null,e.React.createElement($,{label:o.label,subLabel:o.subLabel,leading:e.React.createElement(q,{style:{opacity:1},source:i.getAssetIDByName(o.icon)}),onPress:o.callback}))});h.unshift(J)})})}))},onUnload(){B.forEach(function(t){return t?.()})},settings:H};return I.default=Q,Object.defineProperty(I,"__esModule",{value:!0}),I})({},vendetta.patcher,vendetta.ui.assets,vendetta.metro,vendetta.metro.common,vendetta.ui.components,vendetta.ui.toasts,vendetta.plugin,vendetta.storage,vendetta.ui);
