(function(j,V,a,H,e,I,Y,D,N,ne){"use strict";const{default:ae,GuildIconSizes:le}=a.findByProps("GuildIconSizes"),re=a.findByName("Icon"),{FormRow:ie}=I.Forms,ce=a.findByProps("uploadEmoji"),oe=a.findByProps("openLazy","hideActionSheet");function se(c,t){fetch(c).then(function(n){n.blob().then(function(r){const o=new FileReader;o.readAsDataURL(r),o.onloadend=function(){t(o.result)}})})}function de(c){let{guild:t,emoji:n}=c;return React.createElement(ie,{leading:React.createElement(ae,{guild:t,size:le.MEDIUM,animate:!1}),label:t.name,trailing:React.createElement(re,{source:N.getAssetIDByName("ic_add_24px")}),onPress:function(){ne.showInputAlert({title:"Emoji name",initialValue:n.name,placeholder:"bleh",onConfirm:function(r){se(n.url,function(o){ce.uploadEmoji({guildId:t.id,image:o,name:r,roles:void 0}).then(function(){D.showToast(`Added ${n.name} ${n.name!==r?`as ${r} `:""}to ${t.name}`,N.getAssetIDByName("Check"))}).catch(function(s){D.showToast(s.body.message,N.getAssetIDByName("Small"))})})},confirmText:`Add to ${t.name}`,confirmColor:"brand",cancelText:"Cancel"}),oe.hideActionSheet()}})}const W=a.findByProps("openLazy","hideActionSheet"),{default:ue}=a.find(function(c){var t,n;return((n=c.default)===null||n===void 0||(t=n.render)===null||t===void 0?void 0:t.name)==="ActionSheet"}),{BottomSheetFlatList:fe}=a.findByProps("BottomSheetScrollView"),{ActionSheetTitleHeader:he,ActionSheetCloseButton:pe}=a.findByProps("ActionSheetTitleHeader"),{FormDivider:ge,FormIcon:Re}=I.Forms,ye=a.findByProps("getGuilds"),ve=a.findByProps("can","_dispatcher"),Ee=function(c){return W.openLazy(new Promise(function(t){return t({default:Se})}),"AddToServerActionSheet",{emoji:c})};function Se(c){let{emoji:t}=c;const n=Object.values(ye.getGuilds()).filter(function(r){return ve.can(e.constants.Permissions.MANAGE_GUILD_EXPRESSIONS,r)});return React.createElement(ue,{scrollable:!0},React.createElement(he,{title:`Stealing ${t.name}`,leading:React.createElement(Re,{style:{marginRight:12},source:{uri:t.url},disableColor:!0}),trailing:React.createElement(pe,{onPress:function(){return W.hideActionSheet()}})}),React.createElement(fe,{style:{flex:1},contentContainerStyle:{paddingBottom:24},data:n,renderItem:function(r){let{item:o}=r;return React.createElement(de,{guild:o,emoji:t})},ItemSeparatorComponent:ge,keyExtractor:function(r){return r.id}}))}const T=a.findByProps("openLazy","hideActionSheet"),{downloadMediaAsset:Be}=a.findByProps("downloadMediaAsset"),{default:Ae}=a.find(function(c){var t,n;return((n=c.default)===null||n===void 0||(t=n.render)===null||t===void 0?void 0:t.name)==="ActionSheet"}),{BottomSheetFlatList:be}=a.findByProps("BottomSheetScrollView"),{ActionSheetTitleHeader:we,ActionSheetCloseButton:Pe}=a.findByProps("ActionSheetTitleHeader"),{default:me,ButtonColors:Le,ButtonLooks:je,ButtonSizes:$e}=a.findByProps("ButtonColors","ButtonLooks","ButtonSizes"),{FormDivider:Ne,FormIcon:xe}=I.Forms,X=function(c,t){return T.openLazy(new Promise(function(n){return n({default:Fe})}),"ShowOptions",{data:c,guild:t})};function Fe(c){let{data:t,guild:n}=c,r={text:"Add to Server",callback:function(){return Ee(t)}},o=[{text:"Copy URL to clipboard",callback:function(){e.clipboard.setString(t.url),T.hideActionSheet(),D.showToast(`Copied ${t.name}'s URL to clipboard`,N.getAssetIDByName("ic_copy_message_link"))}},{text:`Save image to ${e.ReactNative.Platform.select({android:"Downloads",default:"Camera Roll"})}`,callback:function(){Be(t.url,t.url.includes(".gif")?1:0),T.hideActionSheet(),D.showToast(`Saved ${t.name}'s image to ${e.ReactNative.Platform.select({android:"Downloads",default:"Camera Roll"})}`,N.getAssetIDByName("toast_image_saved"))}}];return t.type=="emoji"&&o.unshift(r),React.createElement(React.Fragment,null,React.createElement(Ae,{scrollable:!0},React.createElement(we,{title:t.name||"Options",leading:React.createElement(xe,{style:{marginRight:12},source:N.getAssetIDByName("ic_forum_channel_list_view_24px"),disableColor:!0}),trailing:React.createElement(Pe,{onPress:function(){return T.hideActionSheet()}})}),React.createElement(be,{style:{flex:1},contentContainerStyle:{paddingBottom:24},data:o,renderItem:function(s){let{item:f}=s;return React.createElement(React.Fragment,null,React.createElement(me,{color:Le.BRAND,size:$e.SMALL,text:f.text,onPress:f.callback,style:{margin:e.ReactNative.Platform.select({android:12,default:16})}}))},ItemSeparatorComponent:Ne,keyExtractor:function(s){return s.id}})))}const Ie=a.findByStoreName("EmojiStore"),Ce=a.findByStoreName("StickersStore"),{openMediaModal:De}=a.findByName("MediaModal",!1),{FormLabel:Ve,FormArrow:Ge,FormRow:R,FormSwitch:q,FormSwitchRow:Ue,FormSection:Te,FormDivider:y,FormInput:He}=I.Forms,{ScrollView:ke,TextInput:Ye,TouchableOpacity:x,View:g,Image:G,Text:J,Animated:k}=I.General,i=e.stylesheet.createThemedStyleSheet({container:{marginTop:25,marginLeft:"5%",marginBottom:-15,flexDirection:"row"},textContainer:{paddingLeft:15,paddingTop:5,flexDirection:"column",flexWrap:"wrap",shadowColor:"#000",shadowOffset:{width:1,height:4},shadowOpacity:.1,shadowRadius:4.65,elevation:8},shadow:{shadowColor:"#444",shadowOffset:{width:1,height:4},shadowOpacity:.1,shadowRadius:4.65,elevation:8},image:{borderRadius:10,shadowColor:"#000",shadowOffset:{width:1,height:4},shadowOpacity:.1,shadowRadius:4.65,elevation:8},mainText:{opacity:.975,letterSpacing:.25},header:{color:Y.semanticColors.HEADER_PRIMARY,fontFamily:e.constants.Fonts.DISPLAY_BOLD,fontSize:24,letterSpacing:.25},greenText:{color:Y.semanticColors.TEXT_POSITIVE,fontFamily:e.constants.Fonts.DISPLAY_BOLD},buffer:{padding:14},bg:{backgroundColor:"#FFF"},bg2:{backgroundColor:"#DAF0FA"}});function K(c){let{guild:t}=c;var n,r,o,s;let[f,v]=e.React.useState(!1),[S,C]=e.React.useState(!1);const L=Ie.getGuildEmoji(t?.id),B=Ce.getStickersByGuildId(t?.id);let p=[],d=[];if(L?.length>0)for(let l of L){let h=`https://cdn.discordapp.com/emojis/${l.id}.${l.animated?"gif":"png"}?size=4096`;p.push({name:l?.name,url:h,type:"emoji"})}if(B?.length>0){for(let l of B)if(l?.format_type!=3){let h=`https://media.discordapp.net/stickers/${l.id}.${l.format_type==1||l.format_type==2?"png":"gif"}?size=4096`;d.push({name:l.name,url:h,type:"sticker"})}}let u="https://cdn.discordapp.com",A=`${u}/icons/${t?.id}/${t?.icon}${!(t==null||(r=t.icon)===null||r===void 0||(n=r.startsWith)===null||n===void 0)&&n.call(r,"a_")?".gif":".png"}?size=4096`,b,w,P;t?.banner&&(b=`${u}/banners/${t?.id}/${t?.banner}${!(t==null||(s=t.icon)===null||s===void 0||(o=s.startsWith)===null||o===void 0)&&o.call(s,"a_")?".gif":".png"}?size=4096`),t?.splash&&(w=`${u}/splashes/${t?.id}/${t?.splash}.png?size=4096`),t?.discoverySplash&&(P=`${u}/discovery-splashes/${t?.id}/${t?.discoverySplash}.png?size=4096`);function $(l){e.ReactNative.Image.getSize(l,function(h,te){De({initialSources:[{uri:l,sourceURI:l,width:h,height:te,guildId:"1",channelId:"1"}],initialIndex:0,originLayout:{width:h,height:te,x:1,y:1,resizeMode:"auto"}})})}const F={transform:[{scale:e.React.useRef(new k.Value(1)).current}]};function m(l){let h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:256;return e.React.createElement(e.React.Fragment,null,e.React.createElement(k.View,{style:F},e.React.createElement(G,{style:[i.image,{height:h,width:h+192}],source:{uri:l}})))}let E=[i.header,i.greenText,i.buffer];return e.React.createElement(e.React.Fragment,null,e.React.createElement(ke,null,e.React.createElement(g,{style:{marginBottom:60}},e.React.createElement(g,{style:[{marginBottom:20}]},e.React.createElement(Te,{style:[i.shadow]},e.React.createElement(g,{style:{paddingLeft:16}},e.React.createElement(R,{label:"Server Name",style:[...E],subLabel:t.name||"naem"}),e.React.createElement(y,null),e.React.createElement(R,{label:"Server Description",style:[...E],subLabel:t.description||"No Description"}),e.React.createElement(y,null),e.React.createElement(R,{label:"Member Count",style:[...E],subLabel:t.memberCount||"No Data"}),e.React.createElement(y,null),e.React.createElement(R,{label:"Presence Count",style:[...E],subLabel:t.presenceCount||"No Data"}),e.React.createElement(y,null),e.React.createElement(R,{label:"Server Icon",style:[...E]}),e.React.createElement(g,{style:[i.buffer,{paddingBottom:16}]},e.React.createElement(x,{onPress:function(){return $(A)}},m(A))),e.React.createElement(y,null),b&&e.React.createElement(e.React.Fragment,null,e.React.createElement(R,{label:"Server Banner",style:[...E]}),e.React.createElement(g,{style:[i.buffer,{paddingBottom:16}]},e.React.createElement(x,{onPress:function(){return $(b)}},m(b))),e.React.createElement(y,null)),w&&e.React.createElement(e.React.Fragment,null,e.React.createElement(R,{label:"Server Splash",style:[...E]}),e.React.createElement(g,{style:[i.buffer,{paddingBottom:16}]},e.React.createElement(x,{onPress:function(){return $(w)}},m(w))),e.React.createElement(y,null)),P&&e.React.createElement(e.React.Fragment,null,e.React.createElement(R,{label:"Server Discovery",style:[...E]}),e.React.createElement(g,{style:[i.buffer,{paddingBottom:16}]},e.React.createElement(x,{onPress:function(){return $(P)}},m(P))),e.React.createElement(y,null)),p?.length>0&&e.React.createElement(R,{label:"Emoji",subLabel:"Show emojis of this guild",trailing:e.React.createElement(q,{value:f,onValueChange:function(l){return v(l)}}),style:[i.mainText,i.buffer,i.header]}),f&&p.map(function(l,h){return e.React.createElement(e.React.Fragment,null,e.React.createElement(g,{style:[i.container,{padding:12,flexDirection:"row",textAlign:"center"}]},e.React.createElement(x,{onPress:function(){return X(l,t)}},e.React.createElement(k.View,{style:F},e.React.createElement(G,{style:[i.image,{height:128,width:128}],source:{uri:l.url}}))),e.React.createElement(g,{style:i.textContainer},e.React.createElement(J,{style:[i.mainText,i.header]},l.name||"No Name")),h!==p?.length-1&&e.React.createElement(y,null)))}),d?.length>0&&e.React.createElement(R,{label:"Stickers",subLabel:"Show stickers of this guild",trailing:e.React.createElement(q,{value:S,onValueChange:function(l){return C(l)}}),style:[i.mainText,i.buffer,i.header]}),S&&d.map(function(l,h){return e.React.createElement(e.React.Fragment,null,e.React.createElement(g,{style:[i.container,{padding:12,flexDirection:"row",textAlign:"center"}]},e.React.createElement(x,{onPress:function(){return X(l,t)}},e.React.createElement(k.View,{style:F},e.React.createElement(G,{style:[i.image,{height:256,width:256}],source:{uri:l.url}}))),e.React.createElement(g,{style:i.textContainer},e.React.createElement(J,{style:[i.mainText,i.header]},l.name||"No Name")),h!==p?.length-1&&e.React.createElement(y,null)))})))))))}const _e=a.findByProps("GuildDetails");a.findByStoreName("GuildStore"),a.findByStoreName("UserSettingsProtoStore"),a.findByProps("favoriteSticker","unfavoriteSticker");const Q=a.findByProps("openLazy","hideActionSheet"),{default:ze}=a.find(function(c){var t,n;return((n=c.default)===null||n===void 0||(t=n.render)===null||t===void 0?void 0:t.name)==="ActionSheet"});a.findByProps("hideActionSheet"),a.findByProps("downloadMediaAsset"),a.findByProps("openURL","openDeeplink");const{default:_,ButtonColors:z,ButtonLooks:We,ButtonSizes:M}=a.findByProps("ButtonColors","ButtonLooks","ButtonSizes"),Me=a.findByProps("getRenderCloseButton"),O=a.findByProps("push","pushLazy","pop"),{default:Z,getRenderCloseButton:ee}=Me;let U=[];var Oe={onLoad:function(){U.push(V.after("default",_e,function(c,t){let[{emojiNode:n}]=c;var r,o,s,f,v;if(!n.src)return;const S=t==null||(v=t.props)===null||v===void 0||(f=v.children)===null||f===void 0||(s=f.props)===null||s===void 0||(o=s.children)===null||o===void 0||(r=o.props)===null||r===void 0?void 0:r.children,C=V.after("type",S,function(L,B){var p,d,u,A,b,w;e.React.useEffect(function(){return function(){C()}},[]);let P=B==null||(p=B.props)===null||p===void 0?void 0:p.children[4];if(!P)return console.log("[NULL]");let $=P==null||(A=P.props)===null||A===void 0||(u=A.children[1])===null||u===void 0||(d=u.props)===null||d===void 0?void 0:d.guild;if(!$)return;let F=[].map(function(m){let{text:E,callback:l}=m;return e.React.createElement(_,{color:z.BRAND,text:E,size:M.SMALL,onPress:l,style:{marginTop:e.ReactNative.Platform.select({android:12,default:16})}})});F.unshift(e.React.createElement(e.React.Fragment,null,e.React.createElement(_,{color:z.BRAND,size:M.SMALL,text:"Preview Server",onPress:function(){Q.hideActionSheet();const m=function(){return e.React.createElement(Z,{initialRouteName:"Page",goBackOnBackPress:!0,screens:{Page:{title:"Server Information",headerLeft:ee(function(){return O.pop()}),render:function(){return e.React.createElement(K,{guild:$})}}}})};O.push(m)},style:{marginTop:e.ReactNative.Platform.select({android:12,default:16})}}))),(w=B.props)===null||w===void 0||(b=w.children)===null||b===void 0||b.push(...F)})})),U.push(V.before("render",ze,function(c){let[t]=c;var n,r,o,s,f,v;const S=H.findInReactTree(t,function(d){return Array.isArray(d?.children)}),C=(n=H.findInReactTree(t,function(d){var u;return typeof d?.sticker=="object"&&(d==null||(u=d.sticker)===null||u===void 0?void 0:u.hasOwnProperty("guild_id"))}))===null||n===void 0?void 0:n.sticker;if(!S||!C)return;let L=S.children[3];if(!L)return console.log("[NULL]");let B=L==null||(s=L.props)===null||s===void 0||(o=s.children[1])===null||o===void 0||(r=o.props)===null||r===void 0?void 0:r.guild;if(!B)return;let p=[].map(function(d){let{text:u,callback:A}=d;return e.React.createElement(_,{color:z.BRAND,text:u,size:M.SMALL,onPress:A,style:{marginTop:e.ReactNative.Platform.select({android:12,default:16})}})});p.unshift(e.React.createElement(e.React.Fragment,null,e.React.createElement(_,{color:z.BRAND,size:M.SMALL,text:"Preview Server",onPress:function(){Q.hideActionSheet();const d=function(){return e.React.createElement(Z,{initialRouteName:"Page",goBackOnBackPress:!0,screens:{Page:{title:"Server Information",headerLeft:ee(function(){return O.pop()}),render:function(){return e.React.createElement(K,{guild:B})}}}})};O.push(d)},style:{marginTop:e.ReactNative.Platform.select({android:12,default:16})}}))),S==null||(v=S.children)===null||v===void 0||(f=v.push)===null||f===void 0||f.call(v,...p)}))},onUnload:function(){for(const c of U)c()}};return j.default=Oe,Object.defineProperty(j,"__esModule",{value:!0}),j})({},vendetta.patcher,vendetta.metro,vendetta.utils,vendetta.metro.common,vendetta.ui.components,vendetta.ui,vendetta.ui.toasts,vendetta.ui.assets,vendetta.ui.alerts);
